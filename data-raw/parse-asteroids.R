
dat <- r"--{
"char",  "x",  "y"
"0",  0,  0
"0",  8,  0
"0",  8,  12
"0",  0,  12
"0",  0,  0
"0",  8,  12
"1",  4,  0
"1",  4,  12
"1",  3,  10
"2",  0,  12
"2",  8,  12
"2",  8,  7
"2",  0,  5
"2",  0,  0
"2",  8,  0
"3",  0,  12
"3",  8,  12
"3",  8,  0
"3",  0,  0
"3",  NA,  NA
"3",  0,  6
"3",  8,  6
"4",  0,  12
"4",  0,  6
"4",  8,  6
"4",  NA,  NA
"4",  8,  12
"4",  8,  0
"5",  0,  0
"5",  8,  0
"5",  8,  6
"5",  0,  7
"5",  0,  12
"5",  8,  12
"6",  0,  12
"6",  0,  0
"6",  8,  0
"6",  8,  5
"6",  0,  7
"7",  0,  12
"7",  8,  12
"7",  8,  6
"7",  4,  0
"8",  0,  0
"8",  8,  0
"8",  8,  12
"8",  0,  12
"8",  0,  0
"8",  NA,  NA
"8",  0,  6
"8",  8,  6
"9",  8,  0
"9",  8,  12
"9",  0,  12
"9",  0,  7
"9",  8,  5
".",  3,  0
".",  4,  0
",",  2,  0
",",  4,  2
"-",  2,  6
"-",  6,  6
"+",  1,  6
"+",  7,  6
"+",  NA,  NA
"+",  4,  9
"+",  4,  3
"!",  4,  0
"!",  3,  2
"!",  5,  2
"!",  4,  0
"!",  NA,  NA
"!",  4,  4
"!",  4,  12
"#",  0,  4
"#",  8,  4
"#",  6,  2
"#",  6,  10
"#",  8,  8
"#",  0,  8
"#",  2,  10
"#",  2,  2
"^",  2,  6
"^",  4,  12
"^",  6,  6
"=",  1,  4
"=",  7,  4
"=",  NA,  NA
"=",  1,  8
"=",  7,  8
"*",  0,  0
"*",  4,  12
"*",  8,  0
"*",  0,  8
"*",  8,  8
"*",  0,  0
"_",  0,  0
"_",  8,  0
"/",  0,  0
"/",  8,  12
"\",  0,  12
"\",  8,  0
"@",  8,  4
"@",  4,  0
"@",  0,  4
"@",  0,  8
"@",  4,  12
"@",  8,  8
"@",  4,  4
"@",  3,  6
"$",  6,  2
"$",  2,  6
"$",  6,  10
"$",  NA,  NA
"$",  4,  12
"$",  4,  0
"&",  8,  0
"&",  4,  12
"&",  8,  8
"&",  0,  4
"&",  4,  0
"&",  8,  4
"[",  6,  0
"[",  2,  0
"[",  2,  12
"[",  6,  12
"]",  2,  0
"]",  6,  0
"]",  6,  12
"]",  2,  12
"(",  6,  0
"(",  2,  4
"(",  2,  8
"(",  6,  12
")",  2,  0
")",  6,  4
")",  6,  8
")",  2,  12
"{",  6,  0
"{",  4,  2
"{",  4,  10
"{",  6,  12
"{",  NA,  NA
"{",  2,  6
"{",  4,  6
"}",  4,  0
"}",  6,  2
"}",  6,  10
"}",  4,  12
"}",  NA,  NA
"}",  6,  6
"}",  8,  6
"%",  0,  0
"%",  8,  12
"%",  NA,  NA
"%",  2,  10
"%",  2,  8
"%",  NA,  NA
"%",  6,  4
"%",  6,  2
"<",  6,  0
"<",  2,  6
"<",  6,  12
">",  2,  0
">",  6,  6
">",  2,  12
"|",  4,  0
"|",  4,  5
"|",  NA,  NA
"|",  4,  6
"|",  4,  12
":",  4,  9
":",  4,  7
":",  NA,  NA
":",  4,  5
":",  4,  3
";",  4,  9
";",  4,  7
";",  NA,  NA
";",  4,  5
";",  1,  2
"dquote",  2,  10
"dquote",  2,  6
"dquote",  NA, NA
"dquote",  6,  10
"dquote",  6,  6
"'", 2, 6
"'", 6, 10
"`",  2,  10
"`",  6,  6
"~",  0,  4
"~",  2,  8
"~",  6,  4
"~",  8,  8
"?",  0,  8
"?",  4,  12
"?",  8,  8
"?",  4,  4
"?",  NA,  NA
"?",  4,  1
"?",  4,  0
"A",  0,  0
"A",  0,  8
"A",  4,  12
"A",  8,  8
"A",  8,  0
"A",  NA,  NA
"A",  0,  4
"A",  8,  4
"B",  0,  0
"B",  0,  12
"B",  4,  12
"B",  8,  10
"B",  4,  6
"B",  8,  2
"B",  4,  0
"B",  0,  0
"C",  8,  0
"C",  0,  0
"C",  0,  12
"C",  8,  12
"D",  0,  0
"D",  0,  12
"D",  4,  12
"D",  8,  8
"D",  8,  4
"D",  4,  0
"D",  0,  0
"E",  8,  0
"E",  0,  0
"E",  0,  12
"E",  8,  12
"E",  NA,  NA
"E",  0,  6
"E",  6,  6
"F",  0,  0
"F",  0,  12
"F",  8,  12
"F",  NA,  NA
"F",  0,  6
"F",  6,  6
"G",  6,  6
"G",  8,  4
"G",  8,  0
"G",  0,  0
"G",  0,  12
"G",  8,  12
"H",  0,  0
"H",  0,  12
"H",  NA,  NA
"H",  0,  6
"H",  8,  6
"H",  NA,  NA
"H",  8,  12
"H",  8,  0
"I",  0,  0
"I",  8,  0
"I",  NA,  NA
"I",  4,  0
"I",  4,  12
"I",  NA,  NA
"I",  0,  12
"I",  8,  12
"J",  0,  4
"J",  4,  0
"J",  8,  0
"J",  8,  12
"K",  0,  0
"K",  0,  12
"K",  NA,  NA
"K",  8,  12
"K",  0,  6
"K",  6,  0
"L",  8,  0
"L",  0,  0
"L",  0,  12
"M",  0,  0
"M",  0,  12
"M",  4,  8
"M",  8,  12
"M",  8,  0
"N",  0,  0
"N",  0,  12
"N",  8,  0
"N",  8,  12
"O",  0,  0
"O",  0,  12
"O",  8,  12
"O",  8,  0
"O",  0,  0
"P",  0,  0
"P",  0,  12
"P",  8,  12
"P",  8,  6
"P",  0,  5
"Q",  0,  0
"Q",  0,  12
"Q",  8,  12
"Q",  8,  4
"Q",  0,  0
"Q",  NA,  NA
"Q",  4,  4
"Q",  8,  0
"R",  0,  0
"R",  0,  12
"R",  8,  12
"R",  8,  6
"R",  0,  5
"R",  NA,  NA
"R",  4,  5
"R",  8,  0
"S",  0,  2
"S",  2,  0
"S",  8,  0
"S",  8,  5
"S",  0,  7
"S",  0,  12
"S",  6,  12
"S",  8,  10
"T",  0,  12
"T",  8,  12
"T",  NA,  NA
"T",  4,  12
"T",  4,  0
"U",  0,  12
"U",  0,  2
"U",  4,  0
"U",  8,  2
"U",  8,  12
"V",  0,  12
"V",  4,  0
"V",  8,  12
"W",  0,  12
"W",  2,  0
"W",  4,  4
"W",  6,  0
"W",  8,  12
"X",  0,  0
"X",  8,  12
"X",  NA,  NA
"X",  0,  12
"X",  8,  0
"Y",  0,  12
"Y",  4,  6
"Y",  8,  12
"Y",  NA,  NA
"Y",  4,  6
"Y",  4,  0
"Z",  0,  12
"Z",  8,  12
"Z",  0,  0
"Z",  8,  0
"Z",  NA,  NA
"Z",  2,  6
"Z",  6,  6
}--"


library(dplyr)
df <- readr::read_csv(dat, show_col_types = FALSE) |> 
  dplyr::as_tibble() %>%
  mutate(
    char = if_else(char == "dquote", '"', char)
  )

df$char

# coords = stroke_idx, x, y
# codepoint_to_idx = integer vector
# line_height = int
# default_codedpoint = int
# glyph_info =
#    codepoint
#    npoints
#    row_start  (in coords)
#    row_end
#    width
# baseline_offset = int
# name = str

if (FALSE) {
  vf <- lofifonts:::vector_fonts$arcade |> unclass()
  vf$coords
  vf$glyph_info |> head()
}


df <- df %>% 
  group_by(char) %>%
  mutate(
    stroke_idx = cumsum(row_number() == 1 | is.na(x)),
    point_idx = seq(n())
  ) %>%
  ungroup() %>%
  filter(!is.na(x)) %>%
  mutate(row = seq(n())) 

codepoints <- vapply(df$char, \(c) {
  utf8ToInt(c)
}, integer(1))

df <- df %>% 
  mutate(codepoint = codepoints) 

asteroids <- df %>%
  select(
    codepoint, 
    stroke_idx,
    point_idx,
    x, y
  ) %>%
  mutate(width = 9L, height = 13L) %>%
  as_tibble()







